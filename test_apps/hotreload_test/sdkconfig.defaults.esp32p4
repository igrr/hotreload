# ESP32-P4 specific configuration
# This file is applied when building for ESP32-P4 target

# Use UART console (default, not USB-Serial/JTAG)
CONFIG_ESP_CONSOLE_UART_DEFAULT=y

# Support chip revision v1.0 (requires enabling revisions <3.0)
CONFIG_ESP32P4_SELECTS_REV_LESS_V3=y
CONFIG_ESP32P4_REV_MIN_100=y

# Disable memory protection to allow loading executable code at runtime
# Hot reload requires executing code from dynamically allocated memory,
# which conflicts with W^X (write XOR execute) enforcement
CONFIG_ESP_SYSTEM_MEMPROT_FEATURE=n

# Enable PSRAM support (ESP32-P4-Function-EV-Board has PSRAM)
CONFIG_SPIRAM=y
CONFIG_SPIRAM_MODE_HEX=y
CONFIG_SPIRAM_SPEED_200M=y

# Allow allocating from PSRAM with heap_caps
CONFIG_SPIRAM_USE_CAPS_ALLOC=y

# Required for agent_dev_utils coredump capture and crash analysis
CONFIG_ESP_COREDUMP_ENABLE_TO_UART=y
CONFIG_ESP_SYSTEM_PANIC_PRINT_HALT=y

# Enable Ethernet connection for E2E tests (must be before ETHERNET_INTERNAL_SUPPORT)
CONFIG_EXAMPLE_CONNECT_ETHERNET=y

# Enable internal Ethernet MAC (ESP32-P4-Function-EV-Board)
CONFIG_ETH_USE_ESP32_EMAC=y
CONFIG_ETHERNET_INTERNAL_SUPPORT=y
CONFIG_ETHERNET_PHY_INTERFACE_DEFAULT=y
CONFIG_ETHERNET_PHY_IP101=y
